<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Arah Kiblat Presisi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#0f4d46;
  font-family:Arial, sans-serif;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.app{
  text-align:center;
  width:100%;
  max-width:400px;
}

.title{
  margin-bottom:10px;
}

.compass-wrapper{
  position:relative;
  width:280px;
  height:280px;
  margin:20px auto;
}

/* ================= KOMPAS MUTER ================= */
.compass-rotating{
  position:absolute;
  inset:0;
  border-radius:50%;
  background:#fff;
  box-shadow:0 0 15px rgba(0,0,0,.4);
  transform:rotate(0deg);
}

/* lingkaran */
.circle{
  position:absolute;
  inset:10px;
  border:2px solid #ddd;
  border-radius:50%;
}

/* arah mata angin */
.cardinal{
  position:absolute;
  font-weight:bold;
  color:#0f4d46;
}
.north{ top:5px; left:50%; transform:translateX(-50%); }
.south{ bottom:5px; left:50%; transform:translateX(-50%); }
.east{ right:5px; top:50%; transform:translateY(-50%); }
.west{ left:5px; top:50%; transform:translateY(-50%); }

/* ================= JARUM & KIBLAT TETAP ================= */
.qibla-fixed{
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* jarum */
.needle{
  position:absolute;
  top:50%;
  left:50%;
  width:6px;
  height:110px;
  transform-origin:bottom center;
  transform:translate(-50%,-100%) rotate(0deg);
}
.needle-body{
  width:100%;
  height:100%;
  background:red;
  border-radius:3px;
}

/* ka'bah */
.kabah{
  position:absolute;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:26px;
}

/* titik tengah */
.center-dot{
  position:absolute;
  top:50%;
  left:50%;
  width:10px;
  height:10px;
  background:#333;
  border-radius:50%;
  transform:translate(-50%,-50%);
}

/* info */
.info{
  margin-top:15px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="app">
  <h2 class="title">Arah Kiblat</h2>

  <div class="compass-wrapper">

    <div class="compass-rotating" id="compass">
      <div class="circle"></div>
      <div class="cardinal north">U</div>
      <div class="cardinal east">T</div>
      <div class="cardinal south">S</div>
      <div class="cardinal west">B</div>
    </div>

    <div class="qibla-fixed">
      <div class="needle" id="needle">
        <div class="needle-body"></div>
      </div>
      <div class="kabah">ðŸ•‹</div>
      <div class="center-dot"></div>
    </div>

  </div>

  <div class="info">
    Heading: <span id="heading">â€“</span>Â°<br>
    Kiblat: <span id="qibla">295.24</span>Â°
  </div>
</div>

<script>
/* arah kiblat contoh (Indonesia barat Â±295Â°) */
const QIBLA = 295.24;
document.getElementById("qibla").textContent = QIBLA.toFixed(2);

window.addEventListener("deviceorientationabsolute", e=>{
  if(e.alpha === null) return;

  const heading = e.alpha;
  document.getElementById("heading").textContent = heading.toFixed(1);

  /* kompas ikut muter */
  document.getElementById("compass")
    .style.transform = `rotate(${-heading}deg)`;

  /* jarum kiblat */
  document.getElementById("needle")
    .style.transform =
    `translate(-50%,-100%) rotate(${QIBLA - heading}deg)`;
});
</script>

</body>
</html>